{% extends 'base.html' %}
{% load static %}

{% block content %}

<div class="p-6">

    <!-- Título -->
    <h1 class="text-2xl font-bold mb-6">Dashboard de Vendas</h1>

    <!-- Cards superiores -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">

        <!-- Receita Total -->
        <div class="bg-background-light dark:bg-surface-dark shadow rounded-xl p-5 border border-border-dark">
            <div class="text-sm text-slate-500 dark:text-slate-400">Receita Total</div>
            <div class="text-2xl font-bold text-slate-900 dark:text-white">R$ 3.540.000,00</div>
            <div class="text-green-600 text-sm font-semibold mt-1">↑ +12.5%</div>
        </div>

        <!-- Lucro Bruto -->
        <div class="bg-background-light dark:bg-surface-dark shadow rounded-xl p-5 border border-border-dark">
            <div class="text-sm text-slate-500 dark:text-slate-400">Lucro Bruto</div>
            <div class="text-2xl font-bold text-slate-900 dark:text-white">R$ 1.815.000,00</div>
            <div class="text-sm text-slate-400 dark:text-slate-500 mt-1">Margem: 51.3%</div>
            <div class="text-green-600 text-sm font-semibold mt-1">↑ +8.3%</div>
        </div>

        <!-- Custo Total -->
        <div class="bg-background-light dark:bg-surface-dark shadow rounded-xl p-5 border border-border-dark">
            <div class="text-sm text-slate-500 dark:text-slate-400">Custo Total</div>
            <div class="text-2xl font-bold text-slate-900 dark:text-white">R$ 1.725.000,00</div>
        </div>

        <!-- Markup -->
        <div class="bg-background-light dark:bg-surface-dark shadow rounded-xl p-5 border border-border-dark">
            <div class="text-sm text-slate-500 dark:text-slate-400">Markup Médio</div>
            <div class="text-2xl font-bold text-slate-900 dark:text-white">115.5%</div>
        </div>
    </div>

    <!-- Cards do meio -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">

        <!-- Quantidade Vendida -->
        <div class="bg-white shadow rounded-xl p-5 border">
            <div class="text-sm text-gray-500">Quantidade Vendida</div>
            <div class="text-2xl font-bold">2.870</div>
            <div class="text-sm text-gray-600">unidades</div>
        </div>

        <!-- Ticket Médio -->
        <div class="bg-white shadow rounded-xl p-5 border">
            <div class="text-sm text-gray-500">Ticket Médio</div>
            <div class="text-2xl font-bold">R$ 1.233,45</div>
        </div>

        <!-- Top Produto -->
        <div class="bg-white shadow rounded-xl p-5 border">
            <div class="text-sm text-gray-500">Top Produto</div>
            <div class="text-xl font-bold leading-tight">
                VITAFOR <br>
                CREAFORT <br>
                CREAPURE 300G
            </div>
        </div>
    </div>

    <!-- Cards linha 3 -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">

        <!-- Top Marca -->
        <div class="bg-white shadow rounded-xl p-5 border">
            <div class="text-sm text-gray-500">Top Marca</div>
            <div class="text-xl font-bold">Á GRANEL</div>
        </div>

    </div>

    <!-- Gráficos -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">

        <!-- Receita por Mês -->
        <div class="bg-white shadow rounded-xl p-5 border">
            <h2 class="text-lg font-semibold mb-3">Receita por Mês</h2>
            <canvas id="receitaMesChart"></canvas>
        </div>

        <!-- Receita vs Custo -->
        <div class="bg-white shadow rounded-xl p-5 border">
            <h2 class="text-lg font-semibold mb-3">Receita vs Custo</h2>
            <canvas id="receitaCustoChart"></canvas>
        </div>

    </div>

</div>

<!-- Scripts de gráficos -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // Receita por mês (linha)
    new Chart(document.getElementById('receitaMesChart'), {
        type: 'line',
        data: {
            labels: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN'],
            datasets: [{
                label: 'Receita',
                data: [510000, 540000, 590000, 610000, 640000, 675000],
                borderWidth: 3,
                tension: 0.4
            }]
        }
    });

    // Receita vs Custo (barras)
    new Chart(document.getElementById('receitaCustoChart'), {
        type: 'bar',
        data: {
            labels: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN'],
            datasets: [
                {
                    label: 'Receita',
                    data: [510000, 540000, 590000, 610000, 640000, 675000],
                    borderWidth: 1
                },
                {
                    label: 'Custo',
                    data: [250000, 270000, 290000, 310000, 330000, 350000],
                    borderWidth: 1
                }
            ]
        }
    });
</script>

{% endblock %}
